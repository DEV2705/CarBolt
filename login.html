<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Login Page</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="assets/css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Exo:wght@400;500;600&display=swap");
    :root {
      --login-bg: var(--container-color);
      /* --box-shadow:var(--bs); */
    }

    body {
      font-family: 'Exo', sans-serif;
      background-color: var(--login-bg);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
    }


    .login-container {
      max-width: 400px;
      background-color: var(--container-color);
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 6px 16px var(--box-shadow);
      width: 90%;
      animation: gumi 3s infinite ease-in-out;
      /* display:flex;
      justify-content: center; */
    }

    @keyframes gumi {
      0% {
        box-shadow: 0 4px 10px var(--box-shadow);
      }
      50% {
        box-shadow: 0 8px 20px var(--box-shadow);
      }
      100% {
        box-shadow: 0 4px 10px var(--box-shadow);
      }
    }
    .form-control:focus {
      border-color: #007bff;
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }

    .login-title {
      font-size: 1.8rem;
      font-weight: bolder;
      margin-bottom: 1rem;
      text-align: center;
      color: var(--text-color);
    }

    .btn-login {
      background-color: #007bff;
      color: white;
      border: none;
      font-weight: bold;
    }

    .btn-login:hover {
      background-color: #4392e6;
    }

    .forgot-password {
      text-align: center;
      margin-top: 1rem;
    }

    .forgot-password a {
      color: #007bff;
      text-decoration: none;
    }

    .forgot-password a:hover {
      text-decoration: underline;
    }

    #label{
      color: var(--text-color);
    }


    .square-btn {
      width: 30px; /* Set width to make it square */
      height: 30px; /* Set height to make it square */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .5rem; /* Adjust font size */
      padding: 0; /* Remove extra padding */
      margin-top: 0px;
      padding-top: 3px;
      background-color: #ffffff;
    }


  
    @media (max-width: 576px) {
      .login-container {
        padding: 1.5rem;
      }

      .login-title {
        font-size: 1.5rem;
      }

      .forgot-password {
        font-size: 0.9rem;
      }
    }

    @media screen and (min-width: 410px) {
      .container{
        padding-top: 1px;
      }
      .login-container{
        width: 100rem;
      }
    }
  </style>
</head>
<body>
  
  <div class="container d-flex justify-content-center align-items-center vh-100 ani">
    <div class="shape shape__big"></div>
    <div class="login-container">

      <div class="d-flex align-items-center justify-content-center">
        <!-- <a href="index.html" class="btn square-btn me-3">
          BACK
        </a> -->
        <h2 class="login-title">LOGIN</h2>
      </div>
      <form id="login">
        <div class="mb-3">
          <label for="email" class="form-label " id="label">Email </label>
          <input type="email" class="form-control" id="email" placeholder="Enter your email" required>
        </div>
        <div class="mb-3">
          <label for="password" class="form-label" id="label">Password</label>
          <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
        </div>
        <br>
        <div class="d-grid">
          <button type="submit" class="btn btn-login btn-block">Login</button>
        </div>
        <div class="forgot-password">
          <a href="signup.html">Create an Account</a>
        </div>
        <!-- <div class="forgot-password">
          <a href="#">Forgot Password?</a>
        </div> -->
      </form>
    </div>
    <div class="shape shape__big"></div>
  </div>
  <!-- Bootstrap JS (optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>   
  <script type="module" src="assets/js/auth.js"></script>
  <script src="assets/js/darkmode.js"></script>
</body>
</html>

<!-- 
<script type="module">
  // Import Firebase SDK modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
  import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAYMj_8TzGuq0GkWXcuOPWfjUHeebtscGg",
    authDomain: "carbolt.firebaseapp.com",
    databaseURL: "https://carbolt-default-rtdb.firebaseio.com",
    projectId: "carbolt",
    storageBucket: "carbolt.firebasestorage.app",
    messagingSenderId: "807674053255",
    appId: "1:807674053255:web:13a23877ba013fdd2dae22"
  };
7
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Handle login form submission
  document.getElementById("login").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    // Replace dots in the email address to match the signup format
    const sanitizedEmail = email.replace(/\./g, '_');

    try {
      // Reference to the user node
      const userRef = ref(db, 'users/' + sanitizedEmail);
      
      // Retrieve the user data from the database
      const snapshot = await get(userRef);
      
      if (snapshot.exists()) {
        const userData = snapshot.val();
        
        // Validate the password
        if (userData.password === password) {
          alert("Login successful!");
          // Store login state in localStorage
    localStorage.setItem("loggedInUser", email);

// Redirect to home page
window.location.href = "index.html";
        } else {
          alert("Incorrect password. Please try again.");
        }
      } else {
        alert("No account found with this email. Please sign up first.");
      }
    } catch (error) {
      console.error("Error logging in:", error);
      alert("An error occurred during login. Please try again.");
    }
  });
</script> -->


<!-- <script type="module">
  // Import Firebase SDK modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
  import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAYMj_8TzGuq0GkWXcuOPWfjUHeebtscGg",
    authDomain: "carbolt.firebaseapp.com",
    databaseURL: "https://carbolt-default-rtdb.firebaseio.com",
    projectId: "carbolt",
    storageBucket: "carbolt.firebasestorage.app",
    messagingSenderId: "807674053255",
    appId: "1:807674053255:web:13a23877ba013fdd2dae22"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Handle login form submission
  document.getElementById("login").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    // Replace dots in the email address to match the signup format
    const sanitizedEmail = email.replace(/\./g, '_');

    try {
      // Reference to the user node
      const userRef = ref(db, 'users/' + sanitizedEmail);
      
      // Retrieve the user data from the database
      const snapshot = await get(userRef);
      
      if (snapshot.exists()) {
        const userData = snapshot.val();
        
        // Validate the password
        if (userData.password === password) {
          alert("Login successful!");
          
          // Redirect to the home page
          window.location.href = "index.html";

          // Update the navigation bar
          updateNavBar();
        } else {
          alert("Incorrect password. Please try again.");
        }
      } else {
        alert("No account found with this email. Please sign up first.");
      }
    } catch (error) {
      console.error("Error logging in:", error);
      alert("An error occurred during login. Please try again.");
    }
  });

  // Function to update the navigation bar
  function updateNavBar() {
    const navList = document.querySelector('.nav__list');

    // Remove Login and Sign Up links
    const loginLink = document.querySelector('a[href="login.html"]').parentElement;
    const signupLink = document.querySelector('a[href="signup.html"]').parentElement;
    navList.removeChild(loginLink);
    navList.removeChild(signupLink);

    // Create Profile dropdown
    const profileItem = document.createElement('li');
    profileItem.className = 'nav__item';

    const profileLink = document.createElement('a');
    profileLink.href = '#';
    profileLink.className = 'nav__link';
    profileLink.textContent = 'Profile';

    const dropdownMenu = document.createElement('ul');
    dropdownMenu.className = 'dropdown-menu';

    const historyLink = document.createElement('li');
    historyLink.innerHTML = '<a href="#history">History</a>';

    const logoutLink = document.createElement('li');
    logoutLink.innerHTML = '<a href="#logout">Logout</a>';

    const detailsLink = document.createElement('li');
    detailsLink.innerHTML = '<a href="#details">See Details</a>';

    dropdownMenu.appendChild(historyLink);
    dropdownMenu.appendChild(logoutLink);
    dropdownMenu.appendChild(detailsLink);

    profileItem.appendChild(profileLink);
    profileItem.appendChild(dropdownMenu);

    // Add Profile dropdown to the navigation bar
    navList.appendChild(profileItem);
  }
</script> -->

<!-- <script type="module">
  // Import Firebase SDK modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
  import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-database.js";

  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAYMj_8TzGuq0GkWXcuOPWfjUHeebtscGg",
    authDomain: "carbolt.firebaseapp.com",
    databaseURL: "https://carbolt-default-rtdb.firebaseio.com",
    projectId: "carbolt",
    storageBucket: "carbolt.firebasestorage.app",
    messagingSenderId: "807674053255",
    appId: "1:807674053255:web:13a23877ba013fdd2dae22"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Handle login form submission
  document.getElementById("login").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    // Replace dots in the email address to match the signup format
    const sanitizedEmail = email.replace(/\./g, '_');

    try {
      // Reference to the user node
      const userRef = ref(db, 'users/' + sanitizedEmail);
      
      // Retrieve the user data from the database
      const snapshot = await get(userRef);
      
      if (snapshot.exists()) {
        const userData = snapshot.val();
        
        // Validate the password
        if (userData.password === password) {
          alert("Login successful!");
          
          // Store the user data in localStorage (e.g., email & name)
          localStorage.setItem("loggedInUser", JSON.stringify(userData));
          
          // Redirect to the home page
          window.location.href = "index.html";
        } else {
          alert("Incorrect password. Please try again.");
        }
      } else {
        alert("No account found with this email. Please sign up first.");
      }
    } catch (error) {
      console.error("Error logging in:", error);
      alert("An error occurred during login. Please try again.");
    }
  });
</script> -->
